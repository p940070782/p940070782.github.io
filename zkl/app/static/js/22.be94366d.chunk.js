(window["webpackJsonpreact-cli"]=window["webpackJsonpreact-cli"]||[]).push([[22],{217:function(e,t,n){"use strict";n.r(t),function(e,a){n.d(t,"mobileReg",function(){return C}),n.d(t,"codeReg",function(){return I}),n.d(t,"num",function(){return P}),n.d(t,"default",function(){return F});n(223);var o,r=n(225),i=n.n(r),c=(n(262),n(276)),l=n.n(c),s=(n(237),n(238)),u=n.n(s),h=(n(341),n(343)),g=n.n(h),p=(n(226),n(228)),b=n.n(p),f=n(37),m=n(38),d=n(40),v=n(39),y=n(41),O=(n(350),n(220)),j=n(31),w=n(73),k=n(71),E=n(72),S=n(257),C=/^1(3|5|7|8|9)\d{9}$/,I=/^\d{4}$/,x=null,P=60,F=Object(k.b)()(o=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(d.a)(this,Object(v.a)(t).call(this))).setMobile=function(t){var n=e.code.state.value;e.setState({phoneFlag:C.test(t),loginFlag:C.test(t)&&I.test(n)})},e.setCode=function(t){e.setState({loginFlag:C.test(e.mobile.state.value)&&I.test(t)})},e.receiveCode=function(){x=setInterval(function(){e.state.num>0?(e.state.num--,e.setState({num:e.state.num,txt:"\u8fd8\u5269 "+e.state.num+" S",phoneFlag:!1,toggle:!1})):(e.setState({num:P,txt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",phoneFlag:!0,toggle:!0}),clearInterval(x))},1e3),j.a.post("/react/sendCode",{mobile:e.mobile.state.value}).then(function(e){})},e.gotoLogin=function(){j.a.post("/react/checkCode",{mobile:e.mobile.state.value,code:e.code.state.value}).then(function(t){t.data.type?(w.a.push("/index/mine"),sessionStorage.token=t.data.token,e.props.dispatch(Object(E.c)({token:t.data.token,mobile:e.mobile.state.value})),S.a.changeUserInfo({token:t.data.token,mobile:e.mobile.state.value,isLogin:!0})):sessionStorage.token=""})},e.state={phoneFlag:!1,loginFlag:!1,txt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",num:P,toggle:!0},e}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.phoneFlag,o=t.loginFlag,r=t.txt,c=t.toggle;return a.createElement("div",{className:"indexview"},a.createElement(O.a,{title:"\u767b\u5f55\u3001\u6ce8\u518c",show:!0,login:!0}),a.createElement(i.a,null,a.createElement(b.a,null),a.createElement(l.a,null,a.createElement(b.a,null),a.createElement(g.a,{type:"tel",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",clear:!0,ref:function(t){return e.mobile=t},onChange:this.setMobile,disabled:!c},"\u624b\u673a\u53f7\u7801"),a.createElement(b.a,null),a.createElement(g.a,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",clear:!0,ref:function(t){return e.code=t},onChange:this.setCode},"\u9a8c\u8bc1\u7801"),a.createElement(u.a,{onClick:this.receiveCode,disabled:!n,className:"l-btn",inline:!0,size:"large",type:"warning"}," ",r," "),a.createElement(b.a,null)),a.createElement(u.a,{onClick:this.gotoLogin,disabled:!o,type:"primary"},"\u767b\u5f55")))}}]),t}(e))||o}.call(this,n(0).Component,n(0))},220:function(e,t,n){"use strict";(function(e,a){n.d(t,"a",function(){return w});n(229);var o,r=n(230),i=n.n(r),c=(n(111),n(112)),l=n.n(c),s=(n(231),n(232)),u=n.n(s),h=n(37),g=n(38),p=n(40),b=n(39),f=n(41),m=(n(233),n(234)),d=n.n(m),v=(n(221),n(73)),y=(n(31),n(71)),O=n(72),j=d.a.Item,w=Object(y.b)()(o=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).goback=function(e){e&&(n.props.dispatch(Object(O.b)(localStorage.oldTab)),v.a.go(-1))},n.gotoSearch=function(){v.a.push("/search")},n}return Object(f.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.show,o=t.search,r=t.login,c=t.scan;return a.createElement(i.a,{mode:"dark",icon:n&&a.createElement(l.a,{type:"left"}),onLeftClick:function(){return e.goback(n)},rightContent:[!o&&a.createElement(l.a,{key:"0",onClick:this.gotoSearch,type:"search",style:{marginRight:"16px"}}),a.createElement(E,{key:1,login:r,scan:c})]}," ",this.props.title)}}]),t}(e))||o,k=function(e){return a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/".concat(e,".svg"),className:"am-icon am-icon-xs",alt:""})},E=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(p.a)(this,Object(b.a)(t).call(this))).handleVisibleChange=function(t){e.setState({visible:t})},e.onSelect=function(t){e.setState({visible:!1}),console.log(t);var n=t.props.value;"scan"==n?v.a.push("/scan"):"login"==n?v.a.push("/login"):e.showActionSheet()},e.showActionSheet=function(){var e=["\u62cd\u6444","\u4ece\u624b\u673a\u76f8\u518c\u9009\u62e9","\u5220\u9664","\u53d6\u6d88"];u.a.showActionSheetWithOptions({options:e,cancelButtonIndex:e.length-1,destructiveButtonIndex:e.length-2,message:"wh1906",maskClosable:!0,"data-seed":"logId",wrapProps:{onTouchStart:function(e){return e.preventDefault()}}},function(e){console.log(e)})},e.state={visible:!1},e}return Object(f.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.login,n=e.scan;return a.createElement(d.a,{mask:!0,overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[!n&&a.createElement(j,{key:"4",value:"scan",icon:k("tOtXhkIWzwotgGSeptou"),"data-seed":"logId"},"\u626b\u4e00\u626b"),a.createElement(j,{key:"5",value:"photo",icon:k("PKAgAqZWJVNwKsAJSmXd"),style:{whiteSpace:"nowrap"}},"\u62cd\u7167"),!t&&a.createElement(j,{key:"6",value:"login",icon:k("uQIYTFeRrjPELImDRrPt")},a.createElement("span",{style:{marginRight:5}},"\u767b\u5f55"))],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect},a.createElement("div",{style:{height:"100%",padding:"0 15px",marginRight:"-15px",display:"flex",alignItems:"center"}},a.createElement(l.a,{type:"ellipsis"})))}}]),t}(e)}).call(this,n(0).Component,n(0))},221:function(e,t,n){},257:function(e,t,n){"use strict";var a,o,r,i=n(74),c=n(239),l=n(37),s=n(240),u=(n(241),n(222));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var g=(a=function e(){Object(l.a)(this,e),Object(c.a)(this,"userInfo",o,this),Object(c.a)(this,"changeUserInfo",r,this)},o=Object(s.a)(a.prototype,"userInfo",[u.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLogin:!1}}}),r=Object(s.a)(a.prototype,"changeUserInfo",[u.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userInfo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){Object(i.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.userInfo,{},t)}}}),a);t.a=new g},350:function(e,t,n){}}]);
//# sourceMappingURL=22.be94366d.chunk.js.map